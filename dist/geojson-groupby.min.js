!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.GeoJSONGroupBy=r()}}(function(){return function r(e,n,t){function o(u,f){if(!n[u]){if(!e[u]){var c="function"==typeof require&&require;if(!f&&c)return c(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var s=n[u]={exports:{}};e[u][0].call(s.exports,function(r){var n=e[u][1][r];return o(n?n:r)},s,s.exports,r,e,n,t)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<t.length;u++)o(t[u]);return o}({1:[function(r,e,n){!function(){function r(r){return o.indexOf(r.type)>-1?r.coordinates.map(function(e){var n={};return n.type=r.type.replace("Multi",""),n.coordinates=e,r.crs&&(n.crs=r.crs),n}):!1}function n(r){var e=r.every(function(r){return t.indexOf(r.type)>-1}),n=r[0].crs||0,o=r.every(function(r){var e=r.crs||0;return e==n});if(e&&o){var i={};return i.type="Multi"+r[0].type,i.coordinates=[],0!=n&&(i.crs=n),r.forEach(function(r){i.coordinates.push(r.coordinates)}),i}return!1}var t=["Point","LineString","Polygon"],o=["MultiPoint","MultiLineString","MultiPolygon"],i={explode:r,implode:n};"undefined"!=typeof e&&e.exports?e.exports=i:window&&(window.multigeojson=i)}()},{}],2:[function(r,e,n){"use strict";function t(r,e,n){var t=Array.isArray(r)?r:r.features,n=n||[];n.indexOf("geometry")<0&&n.push("geometry");var u=i(t,e,n);return o(u,{})}function o(r,e){for(var n in r)r[n].geometry?(e[n]=r[n],e[n].geometry=u.implode(r[n].geometry)):e[n]=o(r[n],{});return e}var i=r("json-groupby"),u=r("multigeojson");e.exports=t},{"json-groupby":3,multigeojson:1}],3:[function(r,e,n){"use strict";function t(r,e,n){if(arguments.length<2)return arr;var t=o(r,e);return n&&n.length>0&&(t=f(t,n)),t}function o(r,e){var n={};if(n="string"==typeof e[0]?i(r,e[0]):u(r,e[0]),e=e.slice(1),e.length>0)for(var t in n)n[t]=o(n[t],e);return n}function i(r,e){var n=Array.isArray(c(r[0],e));return n?r.reduce(function(r,n){var t=c(n,e);return t.forEach(function(e){r[e]=r[e]||[],r[e].push(n)}),r},{}):r.reduce(function(r,n){var t=c(n,e);return r[t]=r[t]||[],r[t].push(n),r},{})}function u(r,e){return r.reduce(function(r,n){var t,o,i;return t=c(n,e.property),o=a(t,e.intervals),o===e.intervals.length-1&&o--,i=e.labels?e.labels[o]:o,r[i]=r[i]||[],r[i].push(n),r},{})}function f(r,e){var n={};for(var t in r)Array.isArray(r[t])?n[t]=r[t].reduce(function(r,n){return e.forEach(function(e){r[e]||(r[e]=[]),r[e].push(c(n,e))}),r},{}):n[t]=f(r[t],e);return n}function c(r,e){function n(r,e,n,t){if(r.hasOwnProperty(e))return r[e];throw new Error(t.slice(0,n+1).join(".")+" is not a valid property path")}return e.split(".").reduce(n,r)}function a(r,e,n,t){n=n||0,t=t||e.length;var o=parseInt(n+(t-n)/2,10);return 1>=t-n||e[o]===r?o:e[o]<r?a(r,e,o,t):a(r,e,n,o)}e.exports=t},{}]},{},[2])(2)});
